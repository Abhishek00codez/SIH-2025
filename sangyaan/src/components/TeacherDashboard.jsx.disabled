import React, { useState } from 'react';
import TeacherSidebar from './sidebar.jsx';
import './TeacherDashboard.css';

const TeacherDashboard = () => {
  const [activeTab, setActiveTab] = useState('overview');
  const [isCollapsed, setIsCollapsed] = useState(false);

  const handleTabChange = (tabId) => {
    setActiveTab(tabId);
  };

  const handleToggle = () => {
    setIsCollapsed(!isCollapsed);
  };

  // Overview component - main dashboard page
  const OverviewPage = () => {
    return (
      <div className="overview-page">
        <div className="page-header">
          <h1>Teacher Dashboard Overview</h1>
          <p>Welcome back! Here's what's happening in your classroom today.</p>
        </div>

        <div className="stats-grid">
          <div className="stat-card">
            <div className="stat-icon">👥</div>
            <div className="stat-content">
              <h3>Total Students</h3>
              <div className="stat-number">156</div>
              <div className="stat-change positive">+12 this month</div>
            </div>
          </div>

          <div className="stat-card">
            <div className="stat-icon">📚</div>
            <div className="stat-content">
              <h3>Active Courses</h3>
              <div className="stat-number">8</div>
              <div className="stat-change">Physics, Chemistry, Biology</div>
            </div>
          </div>

          <div className="stat-card">
            <div className="stat-icon">📊</div>
            <div className="stat-content">
              <h3>Avg. Performance</h3>
              <div className="stat-number">78%</div>
              <div className="stat-change positive">+5% from last month</div>
            </div>
          </div>

          <div className="stat-card">
            <div className="stat-icon">🏆</div>
            <div className="stat-content">
              <h3>Assignments Graded</h3>
              <div className="stat-number">42</div>
              <div className="stat-change">15 pending review</div>
            </div>
          </div>
        </div>

        <div className="dashboard-content">
          <div className="content-row">
            <div className="chart-section">
              <h2>Student Performance Trends</h2>
              <div className="chart-placeholder">
                <div className="chart-visual">
                  <div className="chart-bars">
                    <div className="bar" style={{height: '60%'}}><span>Jan</span></div>
                    <div className="bar" style={{height: '75%'}}><span>Feb</span></div>
                    <div className="bar" style={{height: '65%'}}><span>Mar</span></div>
                    <div className="bar" style={{height: '80%'}}><span>Apr</span></div>
                    <div className="bar" style={{height: '85%'}}><span>May</span></div>
                    <div className="bar" style={{height: '78%'}}><span>Jun</span></div>
                  </div>
                  <div className="chart-legend">
                    <span className="legend-item">📈 Average Score</span>
                  </div>
                </div>
              </div>
            </div>

            <div className="activity-section">
              <h2>Recent Activity</h2>
              <div className="activity-list">
                <div className="activity-item">
                  <div className="activity-icon">✅</div>
                  <div className="activity-content">
                    <h4>Assignment Submitted</h4>
                    <p>Sarah Wilson submitted "Chemical Bonds Lab Report"</p>
                    <span className="activity-time">2 hours ago</span>
                  </div>
                </div>

                <div className="activity-item">
                  <div className="activity-icon">📊</div>
                  <div className="activity-content">
                    <h4>Quiz Completed</h4>
                    <p>25 students completed "Atomic Structure Quiz"</p>
                    <span className="activity-time">4 hours ago</span>
                  </div>
                </div>

                <div className="activity-item">
                  <div className="activity-icon">🎯</div>
                  <div className="activity-content">
                    <h4>Learning Goal Achieved</h4>
                    <p>Alex Chen completed "Periodic Table Mastery"</p>
                    <span className="activity-time">1 day ago</span>
                  </div>
                </div>

                <div className="activity-item">
                  <div className="activity-icon">💬</div>
                  <div className="activity-content">
                    <h4>New Discussion</h4>
                    <p>Michael Brown started "Photosynthesis Questions"</p>
                    <span className="activity-time">2 days ago</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div className="content-row">
            <div className="class-progress-section">
              <h2>Class Progress</h2>
              <div className="progress-list">
                <div className="progress-item">
                  <div className="progress-header">
                    <h4>Chemistry - Grade 10A</h4>
                    <span className="progress-percentage">85%</span>
                  </div>
                  <div className="progress-bar">
                    <div className="progress-fill" style={{width: '85%'}}></div>
                  </div>
                  <p>Unit 3: Chemical Bonding - 28/33 students completed</p>
                </div>

                <div className="progress-item">
                  <div className="progress-header">
                    <h4>Physics - Grade 11B</h4>
                    <span className="progress-percentage">72%</span>
                  </div>
                  <div className="progress-bar">
                    <div className="progress-fill" style={{width: '72%'}}></div>
                  </div>
                  <p>Unit 2: Mechanics - 23/32 students completed</p>
                </div>

                <div className="progress-item">
                  <div className="progress-header">
                    <h4>Biology - Grade 9C</h4>
                    <span className="progress-percentage">91%</span>
                  </div>
                  <div className="progress-bar">
                    <div className="progress-fill" style={{width: '91%'}}></div>
                  </div>
                  <p>Unit 1: Cell Biology - 27/30 students completed</p>
                </div>
              </div>
            </div>

            <div className="quick-actions-section">
              <h2>Quick Actions</h2>
              <div className="actions-grid">
                <button className="action-btn">
                  <span className="action-icon">➕</span>
                  Create Assignment
                </button>
                <button className="action-btn">
                  <span className="action-icon">📝</span>
                  New Quiz
                </button>
                <button className="action-btn">
                  <span className="action-icon">📊</span>
                  View Reports
                </button>
                <button className="action-btn">
                  <span className="action-icon">💬</span>
                  Send Message
                </button>
                <button className="action-btn">
                  <span className="action-icon">📅</span>
                  Schedule Event
                </button>
                <button className="action-btn">
                  <span className="action-icon">⚙️</span>
                  Settings
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  };

  // Render content based on active tab
  const renderContent = () => {
    switch (activeTab) {
      case 'overview':
        return <OverviewPage />;
      default:
        return <OverviewPage />;
    }
  };

  return (
    <div className="teacher-dashboard">
      <TeacherSidebar
        activeTab={activeTab}
        onTabChange={handleTabChange}
        isCollapsed={isCollapsed}
        onToggle={handleToggle}
      />
      <div className={`dashboard-main ${isCollapsed ? 'sidebar-collapsed' : ''}`}>
        {renderContent()}
      </div>
    </div>
  );
};

export default TeacherDashboard;